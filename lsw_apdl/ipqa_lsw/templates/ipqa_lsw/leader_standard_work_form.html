{% load static %}
{% load django_bootstrap5 %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPQA Leader Standard Work Form</title>
    {% block stylesheets %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/lsw_form.css' %}">
    {% endblock %}
</head>
<body class="container py-5">
    <h2>IPQA Leader Standard Work Form</h2>
    <form method="post">
        {% csrf_token %}
        
        <!-- General Information -->
        <h3>General Information</h3>
        <div class="mb-3">
            <label for="{{ form.name.id_for_label }}" class="form-label">
                {{ form.name.label }}
            </label>
            {{ form.name }}
        </div>
        <div class="mb-3">
            <legend class="form-label">{{ form.shift.label }}</legend>
            {% for checkbox in form.shift %}
            <div class="form-check">
                {{ checkbox.tag }}
                <label class="form-check-label" for="{{ checkbox.id_for_label }}">
                    {{ checkbox.choice_label }}
                </label>
            </div>
            {% endfor %}
        </div>
        <div class="mb-3">
            <label for="{{ form.date.id_for_label }}" class="form-label">
                {{ form.date.label }}
            </label>
            {{ form.date }}
        </div>
        <div class="mb-3">
            <label for="{{ form.sections_supervised.id_for_label }}" class="form-label">
                {{ form.sections_supervised.label }}
            </label>
            {% for checkbox in form.sections_supervised %}
            <div class="form-check">
                {{ checkbox.tag }}
                <label class="form-check-label" for="{{ checkbox.id_for_label }}">
                    {{ checkbox.choice_label }}
                </label>
            </div>
            {% endfor %}
        </div>
        
        
        <!-- STORES Section (wrapped in a div for toggling) -->
        <div id="stores-section" class="d-none">
            <h3>STORES</h3>
            <!-- Tick All Checkbox -->
            <div class="form-check tick-all">
                {{ form.tick_all_stores }}
                <label class="form-check-label" for="{{ form.tick_all_stores.id_for_label }}">
                    <strong>{{ form.tick_all_stores.label }}</strong>
                </label>
            </div><br><br>
            <div class="form-check">
                <label for="{{ form.stores_cleanliness.id_for_label }}" class="form-check-label">
                    {{ form.stores_cleanliness.label }}
                </label> 
                {{ form.stores_cleanliness }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_environmental.id_for_label }}" class="form-check-label">
                    {{ form.stores_environmental.label }} 
                </label>
                {{ form.stores_environmental }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_line_clearance.id_for_label }}" class="form-check-label">
                    {{ form.stores_line_clearance.label }} 
                </label>
                {{ form.stores_line_clearance }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_calibration.id_for_label }}" class="form-check-label">
                   {{ form.stores_calibration.label }} 
                </label>
                {{ form.stores_calibration }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_material_received.id_for_label }}" class="form-check-label">
                    {{ form.stores_material_received.label }}
                </label> 
                {{ form.stores_material_received }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_supervise_sampling.id_for_label }}" class="form-check-label">
                    {{ form.stores_supervise_sampling.label }} 
                </label>
                {{ form.stores_supervise_sampling }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_material_issued.id_for_label }}" class="form-check-label">
                    {{ form.stores_material_issued.label }} 
                </label>
                {{ form.stores_material_issued }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_released_rm.id_for_label }}" class="form-check-label">
                    {{ form.stores_released_rm.label }}
                </label> 
                {{ form.stores_released_rm }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_status_board.id_for_label }}" class="form-check-label">
                   {{ form.stores_status_board.label }} 
                </label>
                {{ form.stores_status_board }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_bmr_online.id_for_label }}" class="form-check-label">
                    {{ form.stores_bmr_online.label }} 
                </label>
                {{ form.stores_bmr_online }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_logbooks.id_for_label }}" class="form-check-label">
                    {{ form.stores_logbooks.label }}
                </label> 
                {{ form.stores_logbooks }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_verify_rejections.id_for_label }}" class="form-check-label">
                    {{ form.stores_verify_rejections.label }}
                </label> 
                {{ form.stores_verify_rejections }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_status_labels.id_for_label }}" class="form-check-label">
                    {{ form.stores_status_labels.label }} 
                </label>
                {{ form.stores_status_labels }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_batches_received.id_for_label }}" class="form-check-label">
                    {{ form.stores_batches_received.label }}
                </label> 
                {{ form.stores_batches_received }}
            </div>
            <div class="form-check">
                <label for="{{ form.stores_aql_checks.id_for_label }}" class="form-check-label">
                    {{ form.stores_aql_checks.label }}
                </label> 
                {{ form.stores_aql_checks }}
            </div>
            <!-- Table for Reports and Actions Taken -->
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Reports/Escalations</th>
                        <th>Actions Taken</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <textarea class="form-control" name="stores_report" id="stores_report" rows="3" placeholder="Write reports or escalations here..."></textarea>
                        </td>
                        <td>
                           <textarea class="form-control" name="stores_actions_taken" id="stores_actions_taken" rows="3" placeholder="Describe actions taken here..."></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- WATER TREATMENT PLANT Section -->
        <div id="wtp-section" class="d-none">
            <h3>Water Treatment Plant</h3>
            <!-- Tick All Checkbox -->
            <div class="form-check tick-all">
                {{ form.tick_all_wtp }}
                <label class="form-check-label" for="{{ form.tick_all_wtp.id_for_label }}">
                    <strong>{{ form.tick_all_wtp.label }}</strong>
                </label>
            </div><br><br>
            <div class="form-check">
                <label for="{{ form.wtp_cleanliness.id_for_label }}" class="form-check-label">
                    {{ form.wtp_cleanliness.label }} 
                </label>
                {{ form.wtp_cleanliness }}
            </div>
            <div class="form-check">
                <label for="{{ form.wtp_verify_ro_water_generation_report.id_for_label }}" class="form-check-label">
                    {{ form.wtp_verify_ro_water_generation_report.label }}
                </label> 
                {{ form.wtp_verify_ro_water_generation_report }}
            </div>
            <div class="form-check">
                <label for="{{ form.wtp_verify_wfi_system_report.id_for_label }}" class="form-check-label">
                    {{ form.wtp_verify_wfi_system_report.label }}
                </label> 
                {{ form.wtp_verify_wfi_system_report }}
            </div>
            <div class="form-check">
                <label for="{{ form.wtp_verify_rowd_report.id_for_label }}" class="form-check-label">
                    {{ form.wtp_verify_rowd_report.label }}
                </label> 
                {{ form.wtp_verify_rowd_report }}
            </div>
            <div class="form-check">
                <label for="{{ form.wtp_verification_of_logbooks.id_for_label }}" class="form-check-label">
                    {{ form.wtp_verification_of_logbooks.label }}
                </label> 
                {{ form.wtp_verification_of_logbooks }}
            </div>
            <!-- Table for Reports and Actions Taken -->
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Reports/Escalations</th>
                        <th>Actions Taken</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <textarea class="form-control" name="wtp_report" id="wtp_report" rows="3" placeholder="Write reports or escalations here..."></textarea>
                        </td>
                        <td>
                           <textarea class="form-control" name="wtp_actions_taken" id="wtp_actions_taken" rows="3" placeholder="Describe actions taken here..."></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- DISPENSING Section -->
        <div id="dispensing-section" class="d-none">
            <h3>DISPENSING</h3>
            <!-- Tick All Checkbox -->
            <div class="form-check tick-all">
                {{ form.tick_all_dispensing }}
                <label class="form-check-label" for="{{ form.tick_all_dispensing.id_for_label }}">
                    <strong>{{ form.tick_all_dispensing.label }}</strong>
                </label>
            </div><br><br>
            <div class="form-check">
                <label for="{{ form.dispensing_cleanliness.id_for_label }}" class="form-check-label">
                    {{ form.dispensing_cleanliness.label }}
                </label> 
                {{ form.dispensing_cleanliness }}
            </div>
            <div class="form-check">
                <label for="{{ form.dispensing_environmental.id_for_label }}" class="form-check-label">
                    {{ form.dispensing_environmental.label }}
                </label> 
                {{ form.dispensing_environmental }}
            </div>
            <div class="form-check">
                <label for="{{ form.dispensing_calibration.id_for_label }}" class="form-check-label">
                    {{ form.dispensing_calibration.label }}
                </label> 
                {{ form.dispensing_calibration }}
            </div>
            <div class="form-check">
                <label for="{{ form.dispensing_supervise.id_for_label }}" class="form-check-label">
                    {{ form.dispensing_supervise.label }}
                </label> 
                {{ form.dispensing_supervise }}
            </div>
            <div class="form-check">
                <label for="{{ form.dispensing_released_rm.id_for_label }}" class="form-check-label">
                    {{ form.dispensing_released_rm.label }}
                </label> 
                {{ form.dispensing_released_rm }}
            </div>
            <div class="form-check">
                <label for="{{ form.dispensing_status_board.id_for_label }}" class="form-check-label">
                    {{ form.dispensing_status_board.label }}
                </label> 
                {{ form.dispensing_status_board }}
            </div>
            <div class="form-check">
                <label for="{{ form.dispensing_bmr_online.id_for_label }}" class="form-check-label">
                    {{ form.dispensing_bmr_online.label }}
                </label> 
                {{ form.dispensing_bmr_online }}
            </div>
            <div class="form-check">
                <label for="{{ form.dispensing_logbooks.id_for_label }}" class="form-check-label">
                    {{ form.dispensing_logbooks.label }}
                </label> 
                {{ form.dispensing_logbooks }}
            </div>
            <!-- Table for Reports and Actions Taken -->
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Reports/Escalations</th>
                        <th>Actions Taken</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <textarea class="form-control" name="dispensing_report" id="dispensing_report" rows="3" placeholder="Write reports or escalations here..."></textarea>
                        </td>
                        <td>
                           <textarea class="form-control" name="dispensing_actions_taken" id="dispensing_actions_taken" rows="3" placeholder="Describe actions taken here..."></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

         <!-- CLEAN ROOM Section -->
         <div id="cleanroom-section" class="d-none">
            <h3>CLEAN ROOM</h3>
            <!-- Tick All Checkbox -->
            <div class="form-check tick-all">
                {{ form.tick_all_cleanroom }}
                <label class="form-check-label" for="{{ form.tick_all_cleanroom.id_for_label }}">
                    <strong>{{ form.tick_all_cleanroom.label }}</strong>
                </label>
            </div><br><br>
            <div class="form-check">
                <label for="{{ form.cleanroom_cleanliness.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_cleanliness.label }}
                </label> 
                {{ form.cleanroom_cleanliness }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_status_board.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_status_board.label }}
                </label> 
                {{ form.cleanroom_status_board }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_gowning.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_gowning.label }}
                </label> 
                {{ form.cleanroom_gowning }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_bmr_online.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_bmr_online.label }}
                </label> 
                {{ form.cleanroom_bmr_online }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_logbooks.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_logbooks.label }}
                </label> 
                {{ form.cleanroom_logbooks }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_footwear.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_footwear.label }}
                </label> 
                {{ form.cleanroom_footwear }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_filter.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_filter.label }}
                </label> 
                {{ form.cleanroom_filter }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_cip.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_cip.label }}
                </label> 
                {{ form.cleanroom_cip }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_bulk.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_bulk.label }}
                </label> 
                {{ form.cleanroom_bulk }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_bottle_batch.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_bottle_batch.label }}
                </label> 
                {{ form.cleanroom_bottle_batch }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_bioburden.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_bioburden.label }}
                </label> 
                {{ form.cleanroom_bioburden }}
            </div>
            <div class="form-check">
                <label for="{{ form.cleanroom_line_clearance.id_for_label }}" class="form-check-label">
                    {{ form.cleanroom_line_clearance.label }}
                </label> 
                {{ form.cleanroom_line_clearance }}
            </div>
            <!-- Table for Reports and Actions Taken -->
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Reports/Escalations</th>
                        <th>Actions Taken</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <textarea class="form-control" name="cleanroom_report" id="cleanroom_report" rows="3" placeholder="Write reports or escalations here..."></textarea>
                        </td>
                        <td>
                           <textarea class="form-control" name="cleanroom_actions_taken" id="cleanroom_actions_taken" rows="3" placeholder="Describe actions taken here..."></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- STERILIZATION Section -->
        <div id="sterilization-section" class="d-none">
            <h3>STERILIZATION</h3>
            <!-- Tick All Checkbox -->
            <div class="form-check tick-all">
                {{ form.tick_all_sterilization }}
                <label class="form-check-label" for="{{ form.tick_all_sterilization.id_for_label }}">
                    <strong>{{ form.tick_all_sterilization.label }}</strong>
                </label>
            </div><br><br>
            <div class="form-check">
                <label for="{{ form.sterilization_cleanliness.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_cleanliness.label }}
                </label> 
                {{ form.sterilization_cleanliness }}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_line_clearance.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_line_clearance.label }}
                </label> 
                {{ form.sterilization_line_clearance }}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_status_board.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_status_board.label }} 
                </label>
                {{ form.sterilization_status_board }}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_calibration.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_calibration.label }}
                </label> 
                {{ form.sterilization_calibration}}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_bmr_online.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_bmr_online.label }}
                </label> 
                {{ form.sterilization_bmr_online}}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_logbooks.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_logbooks.label }}
                </label> 
                {{ form.sterilization_logbooks}}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_verify_rejections.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_verify_rejections.label }} 
                </label>
                {{ form.sterilization_verify_rejections}}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_bottle_batch.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_bottle_batch.label }} 
                </label>
                {{ form.sterilization_bottle_batch}}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_volume.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_volume.label }}
                </label> 
                {{ form.sterilization_volume}}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_bioburden.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_bioburden.label }}
                </label> 
                {{ form.sterilization_bioburden}}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_leak_testing.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_leak_testing.label }} 
                </label>
                {{ form.sterilization_leak_testing}}
            </div>
            <div class="form-check">
                <label for="{{ form.sterilization_finished.id_for_label }}" class="form-check-label">
                    {{ form.sterilization_finished.label }}
                </label> 
                {{ form.sterilization_finished}}
            </div>
            <!-- Table for Reports and Actions Taken -->
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Reports/Escalations</th>
                        <th>Actions Taken</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <textarea class="form-control" name="sterilization_report" id="sterilization_report" rows="3" placeholder="Write reports or escalations here..."></textarea>
                        </td>
                        <td>
                           <textarea class="form-control" name="sterilization_actions_taken" id="sterilization_actions_taken" rows="3" placeholder="Describe actions taken here..."></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- PACKING Section -->
        <div id="packing-section" class="d-none">
            <h3>PACKING</h3>
            <!-- Tick All Checkbox -->
            <div class="form-check tick-all">
                {{ form.tick_all_packing }}
                <label class="form-check-label" for="{{ form.tick_all_packing.id_for_label }}">
                    <strong>{{ form.tick_all_packing.label }}</strong>
                </label>
            </div><br><br>
            <div class="form-check">
                <label for="{{ form.packing_cleanliness.id_for_label }}" class="form-check-label">
                    {{ form.packing_cleanliness.label }}
                </label> 
                {{ form.packing_cleanliness }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_calibration.id_for_label }}" class="form-check-label">
                    {{ form.packing_calibration.label }}
                </label> 
                {{ form.packing_calibration }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_material_received.id_for_label }}" class="form-check-label">
                    {{ form.packing_material_received.label }}
                </label> 
                {{ form.packing_material_received }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_line_clearance.id_for_label }}" class="form-check-label">
                    {{ form.packing_line_clearance.label }}
                </label> 
                {{ form.packing_line_clearance }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_status_board.id_for_label }}" class="form-check-label">
                    {{ form.packing_status_board.label }}
                </label> 
                {{ form.packing_status_board }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_bmr_online.id_for_label }}" class="form-check-label">
                    {{ form.packing_bmr_online.label }}
                </label> 
                {{ form.packing_bmr_online  }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_leak_testing.id_for_label }}" class="form-check-label">
                    {{ form.packing_leak_testing.label }}
                </label> 
                {{ form.packing_leak_testing  }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_visual.id_for_label }}" class="form-check-label">
                    {{ form.packing_visual.label }}
                </label> 
                {{ form.packing_visual  }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_bottle_batch.id_for_label }}" class="form-check-label">
                    {{ form.packing_bottle_batch.label }}
                </label> 
                {{ form.packing_bottle_batch  }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_quality.id_for_label }}" class="form-check-label">
                    {{ form.packing_quality.label }}
                </label> 
                {{ form.packing_quality  }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_labels.id_for_label }}" class="form-check-label">
                    {{ form.packing_labels.label }}
                </label> 
                {{ form.packing_labels  }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_weight_limits.id_for_label }}" class="form-check-label">
                    {{ form.packing_weight_limits.label }}
                </label> 
                {{ form.packing_weight_limits }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_retention.id_for_label }}" class="form-check-label">
                    {{ form.packing_retention.label }}
                </label> 
                {{ form.packing_retention }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_logbooks.id_for_label }}" class="form-check-label">
                    {{ form.packing_logbooks.label }}
                </label> 
                {{ form.packing_logbooks }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_verify_rejections.id_for_label }}" class="form-check-label">
                    {{ form.packing_verify_rejections.label }} 
                </label>
                {{ form.packing_verify_rejections }}
            </div>
            <div class="form-check">
                <label for="{{ form.packing_status_labels.id_for_label }}" class="form-check-label">
                    {{ form.packing_status_labels.label }}
                </label>
                {{ form.packing_status_labels }}
            </div>
            <!-- Table for Reports and Actions Taken -->
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Reports/Escalations</th>
                        <th>Actions Taken</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <textarea class="form-control" name="packing_report" id="packing_report" rows="3" placeholder="Write reports or escalations here..."></textarea>
                        </td>
                        <td>
                           <textarea class="form-control" name="packing_actions_taken" id="packing_actions_taken" rows="3" placeholder="Describe actions taken here..."></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- PERIODIC DUTIES Section (always visible) -->
        <div id="periodic-section">
            <h3>PERIODIC DUTIES</h3>
            <!-- Tick All Checkbox -->
            <div class="form-check tick-all">
                {{ form.tick_all_periodic }}
                <label class="form-check-label" for="{{ form.tick_all_periodic.id_for_label }}">
                    <strong>{{ form.tick_all_periodic.label }}</strong>
                </label>
            </div><br><br>
            <div class="form-check">
                <label for="{{ form.periodic_trainings.id_for_label }}" class="form-check-label">
                    {{ form.periodic_trainings.label }}
                </label> 
                {{ form.periodic_trainings }}
            </div>
            <div class="form-check">
                <label for="{{ form.periodic_investigations.id_for_label }}" class="form-check-label">
                    {{ form.periodic_investigations.label }}
                </label> 
                {{ form.periodic_investigations }}
            </div>
            <div class="form-check">
                <label for="{{ form.periodic_equipment_tags.id_for_label }}" class="form-check-label">
                    {{ form.periodic_equipment_tags.label }}
                </label>
                {{ form.periodic_equipment_tags }}
            </div>
            <div class="form-check">
                <label for="{{ form.periodic_validation.id_for_label }}" class="form-check-label">
                    {{ form.periodic_validation.label }} 
                </label>
                {{ form.periodic_validation }}
            </div>
            <div class="form-check">
                <label for="{{ form.periodic_calibration.id_for_label }}" class="form-check-label">
                    {{ form.periodic_calibration.label }} 
                </label>
                {{ form.periodic_calibration }}
            </div>
            <div class="form-check">
                <label for="{{ form.periodic_colour_coding.id_for_label }}" class="form-check-label">
                    {{ form.periodic_colour_coding.label }} 
                </label>
                {{ form.periodic_colour_coding }}
            </div>
            <div class="form-check">
                <label for="{{ form.periodic_lighting.id_for_label }}" class="form-check-label">
                    {{ form.periodic_lighting.label }}
                </label> 
                {{ form.periodic_lighting }}
            </div>
            <div class="form-check">
                <label for="{{ form.periodic_cleanroom_qual.id_for_label }}" class="form-check-label">
                    {{ form.periodic_cleanroom_qual.label }} 
                </label>
                {{ form.periodic_cleanroom_qual }}
            </div>
            <!-- Table for Reports and Actions Taken -->
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Reports/Escalations</th>
                        <th>Actions Taken</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <textarea class="form-control" name="periodic_report" id="periodic_report" rows="3" placeholder="Write reports or escalations here..."></textarea>
                        </td>
                        <td>
                           <textarea class="form-control" name="periodic_actions_taken" id="periodic_actions_taken" rows="3" placeholder="Describe actions taken here..."></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <script>
      // JavaScript to show/hide sections based on selections
      document.addEventListener("DOMContentLoaded", function() {
          // Grab all the checkboxes in the sections_supervised field
          const sectionCheckboxes = document.querySelectorAll("input[name='sections_supervised']");
          
          function toggleSections() {
              // Determine the selected values
              const selectedSections = Array.from(sectionCheckboxes)
                .filter(checkbox => checkbox.checked)
                .map(checkbox => checkbox.value);
              
              // List of section IDs corresponding to choices.
              // Ensure the values in this mapping match the ones in SECTION_CHOICES:
              const mapping = {
                  "STORES": "stores-section",
                  "WTP": "wtp-section",         
                  "DISPENSING": "dispensing-section",
                  "CLEAN_ROOM": "cleanroom-section",
                  "STERILIZATION": "sterilization-section",
                  "PACKING": "packing-section"
              };
              
              // Hide all sections (except for the always-visible periodic section)
              Object.values(mapping).forEach(sectionId => {
                  const sectionDiv = document.getElementById(sectionId);
                  if (sectionDiv) {
                      sectionDiv.classList.add('d-none');
                  }
              });
              
              // Show only the ones selected
              selectedSections.forEach(function(section) {
                  const sectionId = mapping[section];
                  if (sectionId) {
                      const sectionDiv = document.getElementById(sectionId);
                      if (sectionDiv) {
                          sectionDiv.classList.remove('d-none');
                      }
                  }
              });
          }
          
          // Bind the change event to each checkbox
          sectionCheckboxes.forEach(checkbox => {
              checkbox.addEventListener("change", toggleSections);
          });
          
          // Call initially to set proper visibility if the form is pre-populated.
          toggleSections();
      });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // List of all "Tick All" checkboxes and corresponding sections
            const sections = [
                { tickAllId: 'tick_all_stores', sectionId: 'stores-section' },
                { tickAllId: 'tick_all_wtp', sectionId: 'wtp-section' },
                { tickAllId: 'tick_all_dispensing', sectionId: 'dispensing-section' },
                { tickAllId: 'tick_all_cleanroom', sectionId: 'cleanroom-section' },
                { tickAllId: 'tick_all_sterilization', sectionId: 'sterilization-section' },
                { tickAllId: 'tick_all_packing', sectionId: 'packing-section' },
                { tickAllId: 'tick_all_periodic', sectionId: 'periodic-section' },
            ];
        
            // Loop through each section to add event listeners
            sections.forEach(section => {
                const tickAll = document.querySelector(`input[name="${section.tickAllId}"]`);
                const checkboxes = document.querySelectorAll(`#${section.sectionId} input[type="checkbox"]`);
                
                if (tickAll) {
                    tickAll.addEventListener('change', function () {
                        checkboxes.forEach(checkbox => checkbox.checked = this.checked);
                    });
                }
            });
        });
        </script>        
</body>
</html>
